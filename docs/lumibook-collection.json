{
  "info": {
    "name": "Lumibook API - Completa",
    "_postman_id": "lumibook-api-collection-001",
    "description": "Coleção completa para testar todas as rotas do Lumibook",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Usuários",
      "item": [
        {
          "name": "Cadastro Aluno",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/users/register", "host": ["{{baseUrl}}"], "path": ["users", "register"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"João Aluno\",\n  \"email\": \"joao@instituicao.edu\",\n  \"senha\": \"Senha@123\",\n  \"papel\": \"aluno\",\n  \"matricula\": \"1234567\"\n}"
            }
          }
        },
        {
          "name": "Cadastro Professor",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/users/register", "host": ["{{baseUrl}}"], "path": ["users", "register"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"Maria Professora\",\n  \"email\": \"maria@universitas.edu.br\",\n  \"senha\": \"Senha@123\",\n  \"papel\": \"professor\"\n}"
            }
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/users/login", "host": ["{{baseUrl}}"], "path": ["users", "login"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"joao@instituicao.edu\",\n  \"senha\": \"Senha@123\"\n}"
            }
          }
        },
        {
          "name": "Perfil autenticado (token)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/users/profile", "host": ["{{baseUrl}}"], "path": ["users", "profile"] }
          }
        },
        {
          "name": "Buscar usuário por ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/users/{{userId}}", "host": ["{{baseUrl}}"], "path": ["users", "{{userId}}"] }
          }
        },
        {
          "name": "Listar todos os usuários",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/users", "host": ["{{baseUrl}}"], "path": ["users"] }
          }
        },
        {
          "name": "Atualizar estatística do usuário",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": { "raw": "{{baseUrl}}/stats/user/{{userId}}/livrosLidos", "host": ["{{baseUrl}}"], "path": ["stats", "user", "{{userId}}", "livrosLidos"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"valor\": 5\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Admins",
      "item": [
        {
          "name": "Cadastro Admin",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/admin", "host": ["{{baseUrl}}"], "path": ["admin"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Admin Master\",\n  \"email\": \"admin@instituicao.edu\",\n  \"password\": \"Admin@123\"\n}"
            }
          }
        },
        {
          "name": "Listar Admins",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/admin", "host": ["{{baseUrl}}"], "path": ["admin"] }
          }
        }
      ]
    },
    {
      "name": "Bibliotecários",
      "item": [
        {
          "name": "Cadastro Bibliotecário",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/librarians", "host": ["{{baseUrl}}"], "path": ["librarians"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Maria Bibliotecária\",\n  \"email\": \"maria@instituicao.edu\",\n  \"password\": \"Biblio@123\"\n}"
            }
          }
        },
        {
          "name": "Listar Bibliotecários",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/librarians", "host": ["{{baseUrl}}"], "path": ["librarians"] }
          }
        }
      ]
    },
    {
      "name": "Livros",
      "item": [
        {
          "name": "Cadastro Livro",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/books", "host": ["{{baseUrl}}"], "path": ["books"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Dom Casmurro\",\n  \"authors\": [\"{{authorId}}\"],\n  \"isbn\": \"9788533615540\",\n  \"ano\": 1899,\n  \"categoria\": \"Romance\",\n  \"editora\": \"{{publisherId}}\",\n  \"stock\": 5\n}"
            }
          }
        },
        {
          "name": "Listar Livros",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/books", "host": ["{{baseUrl}}"], "path": ["books"] }
          }
        },
        {
          "name": "Buscar Livro por ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/books/{{bookId}}", "host": ["{{baseUrl}}"], "path": ["books", "{{bookId}}"] }
          }
        },
        {
          "name": "Atualizar Livro",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/books/{{bookId}}", "host": ["{{baseUrl}}"], "path": ["books", "{{bookId}}"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Novo Título\"\n}"
            }
          }
        },
        {
          "name": "Deletar Livro",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/books/{{bookId}}", "host": ["{{baseUrl}}"], "path": ["books", "{{bookId}}"] }
          }
        }
      ]
    },
    {
      "name": "Obras",
      "item": [
        {
          "name": "Cadastro Obra",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/works", "host": ["{{baseUrl}}"], "path": ["works"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Obra Exemplo\",\n  \"authorId\": \"{{authorId}}\"\n}"
            }
          }
        },
        {
          "name": "Listar Obras",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/works", "host": ["{{baseUrl}}"], "path": ["works"] }
          }
        }
      ]
    },
    {
      "name": "Exemplares",
      "item": [
        {
          "name": "Cadastro Exemplar",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/copies", "host": ["{{baseUrl}}"], "path": ["copies"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bookId\": \"{{bookId}}\",\n  \"status\": \"available\"\n}"
            }
          }
        },
        {
          "name": "Listar Exemplares",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/copies", "host": ["{{baseUrl}}"], "path": ["copies"] }
          }
        }
      ]
    },
    {
      "name": "Autores",
      "item": [
        {
          "name": "Cadastro Autor",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/authors", "host": ["{{baseUrl}}"], "path": ["authors"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"Machado de Assis\",\n  \"bio\": \"Um dos maiores escritores brasileiros.\",\n  \"nascimento\": \"1839-06-21\"\n}"
            }
          }
        },
        {
          "name": "Listar Autores",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/authors", "host": ["{{baseUrl}}"], "path": ["authors"] }
          }
        }
      ]
    },
    {
      "name": "Editoras",
      "item": [
        {
          "name": "Cadastro Editora",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/publishers", "host": ["{{baseUrl}}"], "path": ["publishers"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nome\": \"Companhia das Letras\",\n  \"endereco\": \"São Paulo, Brasil\",\n  \"contato\": \"contato@cia.com.br\"\n}"
            }
          }
        },
        {
          "name": "Listar Editoras",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/publishers", "host": ["{{baseUrl}}"], "path": ["publishers"] }
          }
        }
      ]
    },
    {
      "name": "Reservas",
      "item": [
        {
          "name": "Criar Reserva",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/reservations", "host": ["{{baseUrl}}"], "path": ["reservations"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"bookId\": \"{{bookId}}\",\n  \"copyId\": \"{{copyId}}\"\n}"
            }
          }
        },
        {
          "name": "Listar Reservas (todas)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/reservations", "host": ["{{baseUrl}}"], "path": ["reservations"] }
          }
        },
        {
          "name": "Listar Reservas por Usuário",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/reservations?userId={{userId}}", "host": ["{{baseUrl}}"], "path": ["reservations"], "query": [{ "key": "userId", "value": "{{userId}}" }] }
          }
        },
        {
          "name": "Buscar Reserva por ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/reservations/{{reservationId}}", "host": ["{{baseUrl}}"], "path": ["reservations", "{{reservationId}}"] }
          }
        },
        {
          "name": "Cancelar Reserva",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/reservations/{{reservationId}}", "host": ["{{baseUrl}}"], "path": ["reservations", "{{reservationId}}"] }
          }
        }
      ]
    },
    {
      "name": "Multas",
      "item": [
        {
          "name": "Criar Multa",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/fines", "host": ["{{baseUrl}}"], "path": ["fines"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"value\": 10.0,\n  \"reason\": \"Atraso na devolução\"\n}"
            }
          }
        },
        {
          "name": "Listar Multas",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/fines", "host": ["{{baseUrl}}"], "path": ["fines"] }
          }
        },
        {
          "name": "Pagar Multa",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/fines/{{fineId}}/pay", "host": ["{{baseUrl}}"], "path": ["fines", "{{fineId}}", "pay"] }
          }
        }
      ]
    },
    {
      "name": "Estatísticas",
      "item": [
        {
          "name": "Buscar Estatísticas do Usuário",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/stats/user/{{userId}}", "host": ["{{baseUrl}}"], "path": ["stats", "user", "{{userId}}"] }
          }
        },
        {
          "name": "Atualizar Estatística do Usuário",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": { "raw": "{{baseUrl}}/stats/user/{{userId}}/livrosLidos", "host": ["{{baseUrl}}"], "path": ["stats", "user", "{{userId}}", "livrosLidos"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"valor\": 7\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Audit",
      "item": [
        {
          "name": "Listar Logs de Auditoria",
          "request": {
            "method": "GET",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "url": { "raw": "{{baseUrl}}/audit", "host": ["{{baseUrl}}"], "path": ["audit"] }
          }
        }
      ]
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3001/api" },
    { "key": "token", "value": "" },
    { "key": "userId", "value": "" },
    { "key": "authorId", "value": "" },
    { "key": "publisherId", "value": "" },
    { "key": "bookId", "value": "" },
    { "key": "copyId", "value": "" },
    { "key": "reservationId", "value": "" },
    { "key": "fineId", "value": "" }
  ]
}